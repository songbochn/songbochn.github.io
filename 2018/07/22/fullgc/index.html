<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="在有限的生命体验更多的风景"><title>fullGC分析记录 | Mind And Hand</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.1.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">fullGC分析记录</h1><a id="logo" href="/.">Mind And Hand</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">fullGC分析记录</h1><div class="post-meta">2018-07-22<span> | </span><span class="category"><a href="/categories/%E4%BD%93%E9%AA%8C/">体验</a></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 3.9k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 18</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#jvm%E5%8F%82%E6%95%B0%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.</span> <span class="toc-text">jvm参数设置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GC%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6"><span class="toc-number">2.</span> <span class="toc-text">GC日志文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%9E%90"><span class="toc-number">3.</span> <span class="toc-text">分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GC%E6%97%A5%E5%BF%97%E7%BB%93%E8%AE%BA"><span class="toc-number">4.</span> <span class="toc-text">GC日志结论</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA"><span class="toc-number">5.</span> <span class="toc-text">结论</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%EF%BC%9F"><span class="toc-number">6.</span> <span class="toc-text">如何解决？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3%EF%BC%9A"><span class="toc-number">7.</span> <span class="toc-text">参考文档：</span></a></li></ol></div></div><div class="post-content"><p>在开发过程中发现平均几个小时就会发生一次fullGC,在fullgc的这段时间接口响应十分之慢，甚至会出现超时现象，因此要解决掉这种问题。以下是排查过程。</p>
<h4 id="jvm参数设置"><a href="#jvm参数设置" class="headerlink" title="jvm参数设置"></a>jvm参数设置</h4><p>首先看下jvm参数设置：</p>
<ul>
<li>-XX:+DisableExplicitGC 关闭System.gc()</li>
<li>-XX:+PrintGCDetails 打印GC详细信息</li>
<li>-XX:+PrintHeapAtGC 打印GC前后堆使用情况</li>
<li>-XX:+PrintTenuringDistribution  查看每次minor GC后新的存活周期的阈值 就是年龄</li>
<li>-XX:ParallelGCThreads=20  并行收集器的线程数</li>
<li>-XX:+UseConcMarkSweepGC   使用CMS内存收集</li>
<li>-XX:+PrintGCTimeStamps 打印GC时间</li>
<li>-XX:+PrintGCDateStamps   以日期格式<a id="more"></a></li>
<li>-XX:CMSFullGCsBeforeCompaction=0  上面配置开启的情况下,这里设置多少次Full GC后,对年老代进行压缩</li>
<li>-XX:+UseCMSCompactAtFullCollection 使用并发收集器时,开启对年老代的压缩</li>
<li>-XX:CMSInitiatingOccupancyFraction=80 老年代使用80% 就开始fullGC</li>
<li>-Xmn1024m 年轻代大小-XX:SurvivorRatio=8 Eden区与Survivor区的大小比值</li>
<li>-XX:MetaspaceSize=256m 永久代，初始值一定是2180710byte 扩容到 256m就fullgc,此后扩容一次gc一次</li>
<li>-XX:MaxMetaspaceSize=256m -XX:+HeapDumpOnOutOfMemoryError</li>
<li>-XX:ReservedCodeCacheSize=128m 这个参数主要设置codecache的大小，比如我们jit编译的代码都是放在codecache里的，所以codecache如果满了的话，那带来的问题就是无法再jit编译了，而且还会去优化。因此大家可能碰到这样的问题：cpu一直高，然后发现是编译线程一直高（系统运行到一定时期）-XX:InitialCodeCacheSize=128m 初始化-Xmx3g 最大堆大小-Xms3g 初始堆大小</li>
</ul>
<h4 id="GC日志文件"><a href="#GC日志文件" class="headerlink" title="GC日志文件"></a>GC日志文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">&#123;Heap before GC invocations=2693 (full 10):</span><br><span class="line">par new generation   total 943744K, used 914622K [0x0000000700000000, 0x0000000740000000, 0x0000000740000000)</span><br><span class="line">eden space 838912K, 100% used [0x0000000700000000, 0x0000000733340000, 0x0000000733340000)</span><br><span class="line">from space 104832K,  72% used [0x00000007399a0000, 0x000000073e38f9f8, 0x0000000740000000)</span><br><span class="line">to   space 104832K,   0% used [0x0000000733340000, 0x0000000733340000, 0x00000007399a0000)</span><br><span class="line">concurrent mark-sweep generation total 2097152K, used 1674190K [0x0000000740000000, 0x00000007c0000000, 0x00000007c0000000)</span><br><span class="line">Metaspace       used 82793K, capacity 84248K, committed 84480K, reserved 1124352K</span><br><span class="line">class space    used 8521K, capacity 8836K, committed 8960K, reserved 1048576K</span><br><span class="line">2018-06-27T10:30:03.956+0800: 132844.082: [GC (Allocation Failure) 132844.082: [ParNew</span><br><span class="line">Desired survivor size 53673984 bytes, new threshold 9 (max 15)</span><br><span class="line">- age   1:    9419072 bytes,    9419072 total</span><br><span class="line">- age   2:    6701816 bytes,   16120888 total</span><br><span class="line">- age   3:    4611720 bytes,   20732608 total</span><br><span class="line">- age   4:    4955944 bytes,   25688552 total</span><br><span class="line">- age   5:    7069448 bytes,   32758000 total</span><br><span class="line">- age   6:    7478208 bytes,   40236208 total</span><br><span class="line">- age   7:    6091736 bytes,   46327944 total</span><br><span class="line">- age   8:    5505400 bytes,   51833344 total</span><br><span class="line">- age   9:    5498208 bytes,   57331552 total</span><br><span class="line">: 914622K-&gt;83580K(943744K), 0.0676204 secs] 2588812K-&gt;1765017K(3040896K), 0.0678538 secs] [Times: user=0.45 sys=0.00, real=0.07 secs]</span><br><span class="line">Heap after GC invocations=2694 (full 10):</span><br><span class="line">par new generation   total 943744K, used 83580K [0x0000000700000000, 0x0000000740000000, 0x0000000740000000)</span><br><span class="line">eden space 838912K,   0% used [0x0000000700000000, 0x0000000700000000, 0x0000000733340000)</span><br><span class="line">from space 104832K,  79% used [0x0000000733340000, 0x00000007384df160, 0x00000007399a0000)</span><br><span class="line">to   space 104832K,   0% used [0x00000007399a0000, 0x00000007399a0000, 0x0000000740000000)</span><br><span class="line">concurrent mark-sweep generation total 2097152K, used 1681437K [0x0000000740000000, 0x00000007c0000000, 0x00000007c0000000)</span><br><span class="line">Metaspace       used 82793K, capacity 84248K, committed 84480K, reserved 1124352K</span><br><span class="line">class space    used 8521K, capacity 8836K, committed 8960K, reserved 1048576K</span><br><span class="line">&#125;</span><br><span class="line">2018-06-27T10:30:04.025+0800: 132844.151: [GC (CMS Initial Mark) [1 CMS-initial-mark: 1681437K(2097152K)] 1766485K(3040896K), 0.0106641 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]</span><br><span class="line">2018-06-27T10:30:04.036+0800: 132844.162: [CMS-concurrent-mark-start]</span><br><span class="line">2018-06-27T10:30:04.069+0800: 132844.195: [CMS-concurrent-mark: 0.030/0.033 secs] [Times: user=0.16 sys=0.00, real=0.04 secs]</span><br><span class="line">2018-06-27T10:30:04.069+0800: 132844.195: [CMS-concurrent-preclean-start]</span><br><span class="line">2018-06-27T10:30:04.076+0800: 132844.201: [CMS-concurrent-preclean: 0.006/0.006 secs] [Times: user=0.01 sys=0.00, real=0.00 secs]</span><br><span class="line">2018-06-27T10:30:04.076+0800: 132844.201: [CMS-concurrent-abortable-preclean-start]</span><br><span class="line"> CMS: abort preclean due to time 2018-06-27T10:30:09.275+0800: 132849.401: [CMS-concurrent-abortable-preclean: 5.197/5.200 secs] [Times: user=5.99 sys=0.10, real=5.20 secs]</span><br><span class="line">2018-06-27T10:30:09.276+0800: 132849.402: [GC (CMS Final Remark) [YG occupancy: 240189 K (943744 K)]132849.402: [Rescan (parallel) , 0.0363990 secs]132849.439: [weak refs processing, 0.0347831 secs]132849.473: [class unloading, 0.0227507 secs]132849.496: [scrub symbol table, 0.0075422 secs]132849.504: [scrub string table, 0.0013443 secs][1 CMS-remark: 1681437K(2097152K)] 1921626K(3040896K), 0.1050885 secs] [Times: user=0.34 sys=0.00, real=0.11 secs]</span><br><span class="line">2018-06-27T10:30:09.382+0800: 132849.508: [CMS-concurrent-sweep-start]</span><br><span class="line">2018-06-27T10:30:10.562+0800: 132850.688: [CMS-concurrent-sweep: 1.181/1.181 secs] [Times: user=1.40 sys=0.02, real=1.18 secs]</span><br><span class="line">2018-06-27T10:30:10.562+0800: 132850.688: [CMS-concurrent-reset-start]</span><br><span class="line">2018-06-27T10:30:10.567+0800: 132850.693: [CMS-concurrent-reset: 0.005/0.005 secs] [Times: user=0.01 sys=0.00, real=0.00 secs]</span><br><span class="line">&#123;Heap before GC invocations=2694 (full 11):</span><br><span class="line"> par new generation   total 943744K, used 922492K [0x0000000700000000, 0x0000000740000000, 0x0000000740000000)</span><br><span class="line">  eden space 838912K, 100% used [0x0000000700000000, 0x0000000733340000, 0x0000000733340000)</span><br><span class="line">  from space 104832K,  79% used [0x0000000733340000, 0x00000007384df160, 0x00000007399a0000)</span><br><span class="line">  to   space 104832K,   0% used [0x00000007399a0000, 0x00000007399a0000, 0x0000000740000000)</span><br><span class="line"> concurrent mark-sweep generation total 2097152K, used 85252K [0x0000000740000000, 0x00000007c0000000, 0x00000007c0000000)</span><br><span class="line"> Metaspace       used 82793K, capacity 84248K, committed 84480K, reserved 1124352K</span><br><span class="line">  class space    used 8521K, capacity 8836K, committed 8960K, reserved 1048576K</span><br><span class="line">2018-06-27T10:30:34.966+0800: 132875.092: [GC (Allocation Failure) 132875.092: [ParNew</span><br><span class="line">Desired survivor size 53673984 bytes, new threshold 9 (max 15)</span><br><span class="line">- age   1:    8523248 bytes,    8523248 total</span><br><span class="line">- age   2:    6541000 bytes,   15064248 total</span><br><span class="line">- age   3:    6627176 bytes,   21691424 total</span><br><span class="line">- age   4:    4592336 bytes,   26283760 total</span><br><span class="line">- age   5:    4939016 bytes,   31222776 total</span><br><span class="line">- age   6:    7055128 bytes,   38277904 total</span><br><span class="line">- age   7:    7459240 bytes,   45737144 total</span><br><span class="line">- age   8:    6061064 bytes,   51798208 total</span><br><span class="line">- age   9:    5429624 bytes,   57227832 total</span><br><span class="line">: 922492K-&gt;90909K(943744K), 0.0349351 secs] 1007745K-&gt;181536K(3040896K), 0.0351277 secs] [Times: user=0.20 sys=0.00, real=0.03 secs]</span><br><span class="line">Heap after GC invocations=2695 (full 11):</span><br><span class="line"> par new generation   total 943744K, used 90909K [0x0000000700000000, 0x0000000740000000, 0x0000000740000000)</span><br><span class="line">  eden space 838912K,   0% used [0x0000000700000000, 0x0000000700000000, 0x0000000733340000)</span><br><span class="line">  from space 104832K,  86% used [0x00000007399a0000, 0x000000073f267448, 0x0000000740000000)</span><br><span class="line">  to   space 104832K,   0% used [0x0000000733340000, 0x0000000733340000, 0x00000007399a0000)</span><br><span class="line"> concurrent mark-sweep generation total 2097152K, used 90627K [0x0000000740000000, 0x00000007c0000000, 0x00000007c0000000)</span><br><span class="line"> Metaspace       used 82793K, capacity 84248K, committed 84480K, reserved 1124352K</span><br><span class="line">  class space    used 8521K, capacity 8836K, committed 8960K, reserved 1048576K</span><br><span class="line">&#125;</span><br><span class="line">&#123;Heap before GC invocations=2695 (full 11):</span><br><span class="line"> par new generation   total 943744K, used 929821K [0x0000000700000000, 0x0000000740000000, 0x0000000740000000)</span><br><span class="line">  eden space 838912K, 100% used [0x0000000700000000, 0x0000000733340000, 0x0000000733340000)</span><br><span class="line">  from space 104832K,  86% used [0x00000007399a0000, 0x000000073f267448, 0x0000000740000000)</span><br><span class="line">  to   space 104832K,   0% used [0x0000000733340000, 0x0000000733340000, 0x00000007399a0000)</span><br><span class="line"> concurrent mark-sweep generation total 2097152K, used 90627K [0x0000000740000000, 0x00000007c0000000, 0x00000007c0000000)</span><br><span class="line"> Metaspace       used 82793K, capacity 84248K, committed 84480K, reserved 1124352K</span><br><span class="line">  class space    used 8521K, capacity 8836K, committed 8960K, reserved 1048576K</span><br><span class="line">2018-06-27T10:31:07.676+0800: 132907.802: [GC (Allocation Failure) 132907.802: [ParNew</span><br><span class="line">Desired survivor size 53673984 bytes, new threshold 9 (max 15)</span><br><span class="line">- age   1:    7681112 bytes,    7681112 total</span><br><span class="line">- age   2:    5856440 bytes,   13537552 total</span><br><span class="line">- age   3:    6507528 bytes,   20045080 total</span><br><span class="line">- age   4:    6624920 bytes,   26670000 total</span><br><span class="line">- age   5:    4586624 bytes,   31256624 total</span><br><span class="line">- age   6:    4938792 bytes,   36195416 total</span><br><span class="line">- age   7:    7049544 bytes,   43244960 total</span><br><span class="line">- age   8:    7452280 bytes,   50697240 total</span><br><span class="line">- age   9:    6060952 bytes,   56758192 total</span><br><span class="line">: 929821K-&gt;74939K(943744K), 0.0370969 secs] 1020448K-&gt;170947K(3040896K), 0.0372984 secs] [Times: user=0.24 sys=0.00, real=0.04 secs]</span><br><span class="line">Heap after GC invocations=2696 (full 11):</span><br><span class="line"> par new generation   total 943744K, used 74939K [0x0000000700000000, 0x0000000740000000, 0x0000000740000000)</span><br><span class="line">  eden space 838912K,   0% used [0x0000000700000000, 0x0000000700000000, 0x0000000733340000)</span><br><span class="line">  from space 104832K,  71% used [0x0000000733340000, 0x0000000737c6ed58, 0x00000007399a0000)</span><br><span class="line">  to   space 104832K,   0% used [0x00000007399a0000, 0x00000007399a0000, 0x0000000740000000)</span><br><span class="line"> concurrent mark-sweep generation total 2097152K, used 96007K [0x0000000740000000, 0x00000007c0000000, 0x00000007c0000000)</span><br><span class="line"> Metaspace       used 82793K, capacity 84248K, committed 84480K, reserved 1124352K</span><br><span class="line">  class space    used 8521K, capacity 8836K, committed 8960K, reserved 1048576K</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><p>以上是GC日志，</p>
<p>按时间先后发生了一次minor gc –&gt; major gc –&gt; minor gc</p>
<p>下边逐字逐句分析这段日志：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">1.&#123;Heap before GC invocations&#x3D;2693 (full 10):</span><br><span class="line"></span><br><span class="line">  在minorGC之前，已经执行了2693次GC，10次FullGC</span><br><span class="line"></span><br><span class="line">2. par new generation   total 943744K, used 914622K [0x0000000700000000, 0x0000000740000000, 0x0000000740000000)</span><br><span class="line"></span><br><span class="line">  使用ParNew垃圾收集器，年轻代共943744K,已使用914622K  &#x2F;&#x2F;todo</span><br><span class="line"></span><br><span class="line">3. eden space 838912K, 100% used [0x0000000700000000, 0x0000000733340000, 0x0000000733340000)</span><br><span class="line"></span><br><span class="line">   eden区共有内存 838912k 使用率100%，&#x2F;&#x2F;todo</span><br><span class="line"></span><br><span class="line">4. from space 104832K,  72% used [0x00000007399a0000, 0x000000073e38f9f8, 0x0000000740000000)</span><br><span class="line"></span><br><span class="line">    from survivor区总大小 104832k，使用率 72%</span><br><span class="line"></span><br><span class="line">5.  to   space 104832K,   0% used [0x0000000733340000, 0x0000000733340000, 0x00000007399a0000)</span><br><span class="line">    to survivor区总大小 104832k，使用率 0%</span><br><span class="line"></span><br><span class="line">6. concurrent mark-sweep generation total 2097152K, used 1674190K [0x0000000740000000, 0x00000007c0000000, 0x00000007c0000000)</span><br><span class="line"></span><br><span class="line">    cms负责老年代垃圾回收，老年代共有2097152K的内存，已使用1674190K的内存</span><br><span class="line"></span><br><span class="line">7. Metaspace       used 82793K, capacity 84248K, committed 84480K, reserved 1124352K</span><br><span class="line"></span><br><span class="line">    java8去掉了perm内存，用metaspace取代，关于这些参数，</span><br><span class="line"></span><br><span class="line">8. class space    used 8521K, capacity 8836K, committed 8960K, reserved 1048576K9. 2018-06-27T10:30:03.956+0800: 132844.082: [GC (Allocation Failure) 132844.082: [ParNew</span><br><span class="line"></span><br><span class="line">    时间点：GC原因：Allocation Failure  132844.082表示GC开始时间，相对于JVM启动时间的偏移量</span><br><span class="line"></span><br><span class="line">9. Desired survivor size 53673984 bytes, new threshold 9 (max 15)</span><br><span class="line"></span><br><span class="line">   这一句话非常关键，这里的意思是期望survivor的大小,53673984 bytes。新的晋升年龄为9，最大值为15。因为是复制-清理算法，也就是说，把eden和from的存活对象，复制到to的区域，其实to的接受生效范围是可以制定的，不指定，默认为一个survivor的50%，通过参数【-XX:TargetSurvivorRatio 】调整53673984 bytes就是上述一个survivor大小(104832K)的一半。那么这个有什么用？作用在于计算动态年龄，我期望放下这么多对象，那么多于大小的存活对象，我希望移到老年代，据此算出一个年龄，下次大于这个年龄的晋升到老年代。</span><br><span class="line"></span><br><span class="line">10. - age   1:    9419072 bytes,    9419072 total</span><br><span class="line"></span><br><span class="line">		年龄为1（经历过一次youngGC）的存活对象大小为9419072 bytes, 截止到age 1 总共对象大小9419072 bytes;</span><br><span class="line"></span><br><span class="line">	- age   2:    6701816 bytes,   6701816 total</span><br><span class="line"></span><br><span class="line">		年龄为2（经历过二次youngGC）的存活对象大小为6701816 bytes, 截止到age 2 总共对象大小6701816 bytes;</span><br><span class="line"></span><br><span class="line">	- age   3:    4611720 bytes,   20732608 total</span><br><span class="line"></span><br><span class="line">		同上</span><br><span class="line"></span><br><span class="line">	- age   4:    4955944 bytes,   25688552 total</span><br><span class="line"></span><br><span class="line">		同上</span><br><span class="line"></span><br><span class="line">	- age   5:    7069448 bytes,   32758000 total</span><br><span class="line"></span><br><span class="line">		同上</span><br><span class="line"></span><br><span class="line">	- age   6:    7478208 bytes,   40236208 total</span><br><span class="line"></span><br><span class="line">		同上</span><br><span class="line"></span><br><span class="line">	- age   7:    6091736 bytes,   46327944 total</span><br><span class="line"></span><br><span class="line">		同上</span><br><span class="line"></span><br><span class="line">	- age   8:    5505400 bytes,   51833344 total</span><br><span class="line"></span><br><span class="line">		同上</span><br><span class="line"></span><br><span class="line">	- age   9:    5498208 bytes,   57331552 total</span><br><span class="line"></span><br><span class="line">		同上</span><br><span class="line"></span><br><span class="line">11.: 914622K-&gt;83580K(943744K), 0.0676204 secs] 2588812K-&gt;1765017K(3040896K), 0.0678538 secs] [Times: user&#x3D;0.45 sys&#x3D;0.00, real&#x3D;0.07 secs]</span><br><span class="line"></span><br><span class="line">年轻代共有从914622K回收到83580K，年轻代大小：943744K，花费时间0.0676204secs,  堆大小2588812K到1765017K，总共大小3040896K</span><br><span class="line"></span><br><span class="line">2018-06-27T10:30:04.025+0800: 132844.151: [GC (CMS Initial Mark) [1 CMS-initial-mark: 1681437K(2097152K)] 1766485K(3040896K), 0.0106641 secs] [Times: user&#x3D;0.05</span><br><span class="line">sys&#x3D;0.00, real&#x3D;0.01 secs]</span><br><span class="line">2018-06-27T10:30:04.036+0800: 132844.162: [CMS-concurrent-mark-start]</span><br><span class="line">2018-06-27T10:30:04.069+0800: 132844.195: [CMS-concurrent-mark: 0.030&#x2F;0.033 secs] [Times: user&#x3D;0.16 sys&#x3D;0.00, real&#x3D;0.04 secs]</span><br><span class="line">2018-06-27T10:30:04.069+0800: 132844.195: [CMS-concurrent-preclean-start]</span><br><span class="line">2018-06-27T10:30:04.076+0800: 132844.201: [CMS-concurrent-preclean: 0.006&#x2F;0.006 secs] [Times: user&#x3D;0.01 sys&#x3D;0.00, real&#x3D;0.00 secs]</span><br><span class="line">2018-06-27T10:30:04.076+0800: 132844.201: [CMS-concurrent-abortable-preclean-start]</span><br><span class="line">CMS: abort preclean due to time 2018-06-27T10:30:09.275+0800: 132849.401: [CMS-concurrent-abortable-preclean: 5.197&#x2F;5.200 secs] [Times: user&#x3D;5.99 sys&#x3D;0.10, real&#x3D;5.20 secs]</span><br><span class="line">2018-06-27T10:30:09.276+0800: 132849.402: [GC (CMS Final Remark) [YG occupancy: 240189 K (943744 K)]132849.402: [Rescan (parallel) , 0.0363990 secs]132849.439: [weak</span><br><span class="line">refs processing, 0.0347831 secs]132849.473: [class unloading, 0.0227507 secs]132849.496: [scrub symbol table, 0.0075422 secs]132849.504: [scrub string table, 0.0013443</span><br><span class="line">secs][1 CMS-remark: 1681437K(2097152K)] 1921626K(3040896K), 0.1050885 secs] [Times: user&#x3D;0.34 sys&#x3D;0.00, real&#x3D;0.11 secs]</span><br><span class="line">2018-06-27T10:30:09.382+0800: 132849.508: [CMS-concurrent-sweep-start]</span><br><span class="line">2018-06-27T10:30:10.562+0800: 132850.688: [CMS-concurrent-sweep: 1.181&#x2F;1.181 secs] [Times: user&#x3D;1.40 sys&#x3D;0.02, real&#x3D;1.18 secs]</span><br><span class="line">2018-06-27T10:30:10.562+0800: 132850.688: [CMS-concurrent-reset-start]</span><br><span class="line">2018-06-27T10:30:10.567+0800: 132850.693: [CMS-concurrent-reset: 0.005&#x2F;0.005 secs] [Times: user&#x3D;0.01 sys&#x3D;0.00, real&#x3D;0.00 secs]</span><br><span class="line">关于CMS日志分析，参考下面链接</span><br></pre></td></tr></table></figure>
<h4 id="GC日志结论"><a href="#GC日志结论" class="headerlink" title="GC日志结论"></a>GC日志结论</h4><p>设置的老年代清理阈值为80%,可以看到在进行CMS回收的时候，老年代使用大小为 1681437K，在回收完之后老年代容量90627K，回收了75.8%,这明显是年轻代对象过早提升到老年代造成的老年代充斥大量垃圾的情况。</p>
<p>那么造成过早提升的原因分析大概是以下这些，目标是让让短命对象活在年轻代：</p>
<p>1️⃣：年轻代内存大小设置过小，</p>
<p>2️⃣：TargetSurvivorRatio参数太小，每次youngGC允许呆在年轻代的数量过小，</p>
<p>3️⃣：短命对象持续生成过多，使得动态年龄降低，使得大量对象晋升老年代</p>
<p>分析出原因后，接下来便是调整参数，通过-Xmn2g把年轻代调大，并调整TargetSurvivorRatio为60，有所缓解但还是明显有增长。于是准备Dump一份堆快照看下大对象都是什么，这里注意不要在业务高峰期dump文件，有可能造成请求超时。</p>
<p>下下来dump文件这里采用mat分析，<a target="_blank" rel="noopener" href="http://www.songbohome.com/2018/07/22/2018-07-22-mat/">MAT工具使用</a></p>
<p>这里使用mat分析时，要把keepUnreachableObjects勾上，要不然会把无GCROOT引用不到的删除。而我们主要是看垃圾都是什么。<br><img src="https://res.cloudinary.com/dataset/image/upload/v1532242641/image/matmain.png" alt="mat总的看"><br>可以看到jdbc4Connection有17763个对象，占了585M多，byte[]数组有444158个，占了318M多，合起来占用了47.14%的内存，我们是用了dbcp2的连接池，但为何依然有如此多连接需要分析。待会儿也会看一下</p>
<p>在GC完之后jdbc4Connection有对象890个 占用内存70M。相当于jdbc4Connection的94%都是废弃链接。</p>
<p>byte[]的内容。<br><img src="https://res.cloudinary.com/dataset/image/upload/v1532242641/image/matdetail.png" alt="mat细节"><br>这是两个Connection前一个是无引用的垃圾，后一个是真正的链接。可以看到该链接正常是被ConcurrentHashMap所持有，而垃圾没有被持有，</p>
<p>看下dbcp2的连接池代码：</p>
<p>这是销毁对象的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public void invalidateObject(final T obj) throws Exception &#123;</span><br><span class="line">        final PooledObject&lt;T&gt; p &#x3D; allObjects.get(new IdentityWrapper&lt;&gt;(obj));</span><br><span class="line">        if (p &#x3D;&#x3D; null) &#123;</span><br><span class="line">            if (isAbandonedConfig()) &#123;</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            throw new IllegalStateException(</span><br><span class="line">                    &quot;Invalidated object not currently part of this pool&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        synchronized (p) &#123;</span><br><span class="line">            if (p.getState() !&#x3D; PooledObjectState.INVALID) &#123;</span><br><span class="line">                destroy(p);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ensureIdle(1, false);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void destroy(final PooledObject&lt;T&gt; toDestroy) throws Exception &#123;</span><br><span class="line">        toDestroy.invalidate();</span><br><span class="line">        idleObjects.remove(toDestroy);&#x2F;&#x2F;idleObjects为空闲链接集合。</span><br><span class="line">        allObjects.remove(new IdentityWrapper&lt;&gt;(toDestroy.getObject()));&#x2F;&#x2F;所有链接集合</span><br><span class="line">        try &#123;</span><br><span class="line">            factory.destroyObject(toDestroy);</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            destroyedCount.incrementAndGet();</span><br><span class="line">            createCount.decrementAndGet();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>根据我们整理的结果，现象是大量链接被关闭</p>
<p>链接的生命周期，因为使用而被创建入池，使用完空闲，有使用再拿出来用。空闲一段时间被关闭</p>
<p>这里有几个参数需要我们权衡 minEvictableIdleTimeMillis表示空闲多久被关闭</p>
<p>timeBetweenEvictionRunsMillis：清除空闲链接线程多久运行一次。将空闲链接关闭 //默认30s</p>
<p>numTestsPerEvictionRun：检查空间链接线程每次检查几个链接</p>
<p>config 内容:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">public EvictionConfig(final long poolIdleEvictTime, final long poolIdleSoftEvictTime,</span><br><span class="line">            final int minIdle) &#123;</span><br><span class="line">        if (poolIdleEvictTime &gt; 0) &#123;</span><br><span class="line">            idleEvictTime &#x3D; poolIdleEvictTime;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            idleEvictTime &#x3D; Long.MAX_VALUE;</span><br><span class="line">        &#125;</span><br><span class="line">        if (poolIdleSoftEvictTime &gt; 0) &#123;</span><br><span class="line">            idleSoftEvictTime &#x3D; poolIdleSoftEvictTime;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            idleSoftEvictTime  &#x3D; Long.MAX_VALUE;</span><br><span class="line">        &#125;</span><br><span class="line">        this.minIdle &#x3D; minIdle; &#x2F;&#x2F;默认0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">这是线程逻辑</span><br><span class="line"></span><br><span class="line">    public boolean evict(final EvictionConfig config, final PooledObject&lt;T&gt; underTest,</span><br><span class="line">            final int idleCount) &#123;</span><br><span class="line"></span><br><span class="line">        if ((config.getIdleSoftEvictTime() &lt; underTest.getIdleTimeMillis() &amp;&amp;</span><br><span class="line">                config.getMinIdle() &lt; idleCount) ||</span><br><span class="line">                config.getIdleEvictTime() &lt; underTest.getIdleTimeMillis()) &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>//为true表示要关闭</p>
<p>判断来说 numTestsPerEvictionRun可以改小，timeBetweenEvictionRunsMillis改大，minEvictableIdleTimeMillis改大。</p>
<p>使得空闲链接停留时间加长，避免被关闭。</p>
<p>那么还有一个问题：为什么链接在年轻代没有被回收掉，而堆积在老年代等到阈值触发才被回收：</p>
<p>这引出来一个问题，这些链接在刚刚晋升到老年代时，是否还被引用，这里分成两种情况来看。</p>
<p>如果没被引用，那就只能等到阈值触发被回收。但是在晋升之前已经被年轻代回收掉了，假设不成立。</p>
<p>如果被引用，那么可以得出以下结论。</p>
<h4 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h4><p>首先扫描空闲连接的时间是恒定不变的。30s</p>
<p>youngGC频率：</p>
<p>撷取2018-06-20中午12点和下午15点的数据来看：</p>
<p>12点数据<br><img src="https://res.cloudinary.com/dataset/image/upload/v1532242641/image/gcfirst.png" alt="12"><br>                                                                               15点数据<br><img src="https://res.cloudinary.com/dataset/image/upload/v1532242641/image/gcsecond.png" alt="15"><br>可见60s内youngGC频率非常之高。</p>
<p>从一批链接【记做A】的诞生来分析，A和一批对象诞生在eden区域，伴随着大量临时对象的生成以及youngGC频率可以看出未等到清理空闲链接，A中的部分链接已经晋升到了老年代，扫描空闲链接的线程，将空闲链接剔除掉后，这些垃圾链接就安安逸逸的生活在老年代。在需要链接的时候又去eden生成一批链接，周而复始。直到老年代达到阈值。</p>
<h4 id="如何解决？"><a href="#如何解决？" class="headerlink" title="如何解决？"></a>如何解决？</h4><p>目前上线的做法增大minEvictableIdleTimeMillis参数，也就是说让链接一直不被回收。这样也就不会产生大量的垃圾链接。而这批链接也安安静静的生活在老年代。</p>
<p>还有两个问题需要思考</p>
<p>这些链接生活在老年代是应该的吗？</p>
<p>为什么youngGC如此频繁，younGC的频率正常应该是多久？</p>
<h4 id="参考文档："><a href="#参考文档：" class="headerlink" title="参考文档："></a>参考文档：</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wilsonpeng3/article/details/70064336">线上FullGC频繁的排查</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012422829/article/details/78154495">一次频繁Full GC的排查过程</a></p>
<p><a target="_blank" rel="noopener" href="http://www.importnew.com/24393.html">又一次线上OOM排查经过</a></p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/redcreen/archive/2011/05/04/2037057.html">JVM系列三:JVM参数设置、分析</a></p>
<p><a target="_blank" rel="noopener" href="http://darktea.github.io/notes/2013/09/08/java-gc.html">GC概念理解</a></p>
<p><a target="_blank" rel="noopener" href="http://www.importnew.com/22886.html">JVM 调优 —— GC 长时间停顿问题及解决方法</a></p>
<p><a target="_blank" rel="noopener" href="https://neway6655.github.io/gc/2017/10/28/%E8%AE%B0%E4%B8%80%E6%AC%A1JVM%E8%80%81%E7%94%9F%E4%BB%A3%E5%A2%9E%E9%95%BF%E8%BF%87%E5%BF%AB%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5.html">记一次JVM老生代增长过快问题排查</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u011381576/article/details/79635867">MetaSpace的误解</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/benwu/articles/8312699.html">metaSpace参数理解</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/renfufei/article/details/49230943">快速解读GC日志</a></p>
<p><a target="_blank" rel="noopener" href="https://tech.meituan.com/jvm_optimize.html">从实际案例聊聊Java应用的GC优化</a></p>
<p><a target="_blank" rel="noopener" href="https://neway6655.github.io/java,%20gc%20tuning/2016/09/24/gc-tuning.html">一次GC Tuning小记</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhangxiaoguang/p/5792468.html">GC之详解CMS收集过程和日志分析</a></p>
</div><div class="post-copyright"><script type="text/javascript" src="/js/copyright.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copyright.css"><p><span>本文标题：</span>fullGC分析记录</p><p><span>文章作者：</span>宋博</p><p><span>发布时间：</span>2018-07-22</p><p><span>最后更新：</span>2020-09-06</p><p><span>原始链接：</span><a href="/2018/07/22/fullgc/">http://mindmanus.com/2018/07/22/fullgc/</a><span class="copy-path"><i class="fa fa-clipboard" data-clipboard-text="http://mindmanus.com/2018/07/22/fullgc/"></i></span></p><p><span>版权声明：</span>本博客所有文章除特别声明外，均采用 CC BY-NC-SA 3.0 CN 许可协议。转载请注明出处!</p></div><br><div class="tags"><a href="/tags/java/"><i class="fa fa-tag"></i>java</a><a href="/tags/jvm/"><i class="fa fa-tag"></i>jvm</a><a href="/tags/gc/"><i class="fa fa-tag"></i>gc</a></div><div class="post-nav"><a class="pre" href="/2018/07/22/mat/">MAT工具介绍及使用</a><a class="next" href="/2018/07/06/tmux/">如何在mac上搭建tmux并进行系统化配置</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://mindmanus.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BD%93%E9%AA%8C/">体验</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%80%9D%E8%80%83/">思考</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E5%88%92/">计划</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%98%85%E8%AF%BB/">阅读</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/%E7%BB%88%E7%AB%AF/" style="font-size: 15px;">终端</a> <a href="/tags/bash/" style="font-size: 15px;">bash</a> <a href="/tags/jekyll/" style="font-size: 15px;">jekyll</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/gitpages/" style="font-size: 15px;">gitpages</a> <a href="/tags/domain/" style="font-size: 15px;">domain</a> <a href="/tags/%E5%9F%9F%E5%90%8D/" style="font-size: 15px;">域名</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/" style="font-size: 15px;">年度总结</a> <a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 15px;">生活</a> <a href="/tags/%E4%B8%AA%E4%BA%BA%E6%88%90%E9%95%BF/" style="font-size: 15px;">个人成长</a> <a href="/tags/%E6%8A%95%E8%B5%84/" style="font-size: 15px;">投资</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">机器学习</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/" style="font-size: 15px;">计算机视觉</a> <a href="/tags/%E4%BC%A0%E8%AE%B0/" style="font-size: 15px;">传记</a> <a href="/tags/%E6%80%9D%E8%80%83/" style="font-size: 15px;">思考</a> <a href="/tags/%E4%B9%A6%E5%8D%95/" style="font-size: 15px;">书单</a> <a href="/tags/%E7%BB%8F%E5%85%B8%E4%B9%A6%E7%B1%8D/" style="font-size: 15px;">经典书籍</a> <a href="/tags/%E4%B9%A6%E7%B1%8D%E5%89%96%E6%9E%90/" style="font-size: 15px;">书籍剖析</a> <a href="/tags/%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/" style="font-size: 15px;">工作效率</a> <a href="/tags/%E8%BF%90%E7%BB%B4/" style="font-size: 15px;">运维</a> <a href="/tags/%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86/" style="font-size: 15px;">时间管理</a> <a href="/tags/%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90/" style="font-size: 15px;">内存分析</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 15px;">工具</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/innodb/" style="font-size: 15px;">innodb</a> <a href="/tags/lock/" style="font-size: 15px;">lock</a> <a href="/tags/%E5%B7%A5%E4%BD%9C/" style="font-size: 15px;">工作</a> <a href="/tags/%E4%B8%AA%E4%BA%BA%E8%A7%84%E8%8C%83/" style="font-size: 15px;">个人规范</a> <a href="/tags/%E7%BC%96%E8%BE%91%E5%99%A8/" style="font-size: 15px;">编辑器</a> <a href="/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/" style="font-size: 15px;">效率工具</a> <a href="/tags/%E5%8E%9F%E5%88%99/" style="font-size: 15px;">原则</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/jvm/" style="font-size: 15px;">jvm</a> <a href="/tags/gc/" style="font-size: 15px;">gc</a> <a href="/tags/deadlock/" style="font-size: 15px;">deadlock</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/08/30/tags-and-categories/">如何使用分类和标签来划分你的生活(分类篇)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/23/text-editor/">用sublime写markdown，飞一般的体验</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/14/gaplock-deadlock/">mysql-gap锁引发死锁原因探寻</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/04/plan-to-better/">「个人生活规划」概要篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/31/innodb-locks/">innodb锁类型(翻译自官网5.7版本)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/22/mat/">MAT工具介绍及使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/22/fullgc/">fullGC分析记录</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/06/tmux/">如何在mac上搭建tmux并进行系统化配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/24/phoenix-project-time-manage/">剖析《凤凰项目：一个IT运维的传奇故事》</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/24/book-analyze-list/">「书籍剖析计划」（附阅读清单）</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://tech.meituan.com/" title="美团点评技术团队" target="_blank">美团点评技术团队</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">Mind And Hand.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>